"use strict";var ir=Object.create;var pe=Object.defineProperty;var sr=Object.getOwnPropertyDescriptor;var ar=Object.getOwnPropertyNames;var or=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty;var ur=(t,e)=>{for(var r in e)pe(t,r,{get:e[r],enumerable:!0})},pt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ar(e))!lr.call(t,i)&&i!==r&&pe(t,i,{get:()=>e[i],enumerable:!(n=sr(e,i))||n.enumerable});return t};var me=(t,e,r)=>(r=t!=null?ir(or(t)):{},pt(e||!t||!t.__esModule?pe(r,"default",{value:t,enumerable:!0}):r,t)),cr=t=>pt(pe({},"__esModule",{value:!0}),t);var un={};ur(un,{AllowlistIdentifier:()=>D,AuthStatus:()=>et,Clerk:()=>ln,Client:()=>F,DeletedObject:()=>V,Email:()=>$,EmailAddress:()=>q,ExternalAccount:()=>B,IdentificationLink:()=>M,Invitation:()=>G,OauthAccessToken:()=>H,ObjectType:()=>$e,Organization:()=>K,OrganizationInvitation:()=>Y,OrganizationMembership:()=>X,OrganizationMembershipPublicUserData:()=>ie,PhoneNumber:()=>z,RedirectUrl:()=>Q,SMSMessage:()=>ee,Session:()=>E,SignInToken:()=>Z,Token:()=>te,User:()=>re,Verification:()=>T,constants:()=>yt,createAuthenticateRequest:()=>ct,debugRequestState:()=>ze,decodeJwt:()=>de,deserialize:()=>Ge,hasValidSignature:()=>at,loadInterstitialFromLocal:()=>Ce,makeAuthObjectSerializable:()=>xr,prunePrivateMetadata:()=>Ye,redirect:()=>rr,sanitizeAuthObject:()=>wr,signedInAuthObject:()=>Xe,signedOutAuthObject:()=>Qe,verifyJwt:()=>Me,verifyToken:()=>lt});module.exports=cr(un);var g=class{constructor(e){this.request=e}requireId(e){if(!e)throw new Error("A valid resource ID is required.")}};var je="/",dr=new RegExp(je+"{1,}","g");function u(...t){return t.filter(e=>e).join(je).replace(dr,je)}var De="/allowlist_identifiers",ge=class extends g{async getAllowlistIdentifierList(){return this.request({method:"GET",path:De})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:De,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:u(De,e)})}};var Fe="/clients",fe=class extends g{async getClientList(){return this.request({method:"GET",path:Fe})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:u(Fe,e)})}verifyClient(e){return this.request({method:"POST",path:u(Fe,"verify"),bodyParams:{token:e}})}};var pr="/domains",ye=class extends g{async deleteDomain(e){return this.request({method:"DELETE",path:u(pr,e)})}};var he="/email_addresses",be=class extends g{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:u(he,e)})}async createEmailAddress(e){return this.request({method:"POST",path:he,bodyParams:e})}async updateEmailAddress(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:u(he,e),bodyParams:r})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:u(he,e)})}};var mr="/emails",Se=class extends g{async createEmail(e){return this.request({method:"POST",path:mr,bodyParams:e})}};var Oe=class extends g{async getInterstitial(){return this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}};var Ve="/invitations",ke=class extends g{async getInvitationList(){return this.request({method:"GET",path:Ve})}async createInvitation(e){return this.request({method:"POST",path:Ve,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:u(Ve,e,"revoke")})}};var x="/organizations",Ie=class extends g{async getOrganizationList(e){return this.request({method:"GET",path:x,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:x,bodyParams:e})}async getOrganization(e){let r="organizationId"in e?e.organizationId:e.slug;return this.requireId(r),this.request({method:"GET",path:u(x,r)})}async updateOrganization(e,r){return this.requireId(e),this.request({method:"PATCH",path:u(x,e),bodyParams:r})}async updateOrganizationMetadata(e,r){return this.requireId(e),this.request({method:"PATCH",path:u(x,e,"metadata"),bodyParams:r})}async deleteOrganization(e){return this.request({method:"DELETE",path:u(x,e)})}async getOrganizationMembershipList(e){let{organizationId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:u(x,r,"memberships"),queryParams:{limit:n,offset:i}})}async createOrganizationMembership(e){let{organizationId:r,userId:n,role:i}=e;return this.requireId(r),this.request({method:"POST",path:u(x,r,"memberships"),bodyParams:{userId:n,role:i}})}async updateOrganizationMembership(e){let{organizationId:r,userId:n,role:i}=e;return this.requireId(r),this.request({method:"PATCH",path:u(x,r,"memberships",n),bodyParams:{role:i}})}async updateOrganizationMembershipMetadata(e){let{organizationId:r,userId:n,publicMetadata:i,privateMetadata:s}=e;return this.request({method:"PATCH",path:u(x,r,"memberships",n,"metadata"),bodyParams:{publicMetadata:i,privateMetadata:s}})}async deleteOrganizationMembership(e){let{organizationId:r,userId:n}=e;return this.requireId(r),this.request({method:"DELETE",path:u(x,r,"memberships",n)})}async getPendingOrganizationInvitationList(e){let{organizationId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:u(x,r,"invitations","pending"),queryParams:{limit:n,offset:i}})}async createOrganizationInvitation(e){let{organizationId:r,...n}=e;return this.requireId(r),this.request({method:"POST",path:u(x,r,"invitations"),bodyParams:{...n}})}async revokeOrganizationInvitation(e){let{organizationId:r,invitationId:n,requestingUserId:i}=e;return this.requireId(r),this.request({method:"POST",path:u(x,r,"invitations",n,"revoke"),bodyParams:{requestingUserId:i}})}};var Pe="/phone_numbers",_e=class extends g{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:u(Pe,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:Pe,bodyParams:e})}async updatePhoneNumber(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:u(Pe,e),bodyParams:r})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:u(Pe,e)})}};var Ae="/redirect_urls",we=class extends g{async getRedirectUrlList(){return this.request({method:"GET",path:Ae})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:u(Ae,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:Ae,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:u(Ae,e)})}};var oe="/sessions",xe=class extends g{async getSessionList(e){return this.request({method:"GET",path:oe,queryParams:e})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:u(oe,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:u(oe,e,"revoke")})}async verifySession(e,r){return this.requireId(e),this.request({method:"POST",path:u(oe,e,"verify"),bodyParams:{token:r}})}async getToken(e,r){return this.requireId(e),(await this.request({method:"POST",path:u(oe,e,"tokens",r||"")})).jwt}};var mt="/sign_in_tokens",Te=class extends g{async createSignInToken(e){return this.request({method:"POST",path:mt,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:u(mt,e,"revoke")})}};var gr="/sms_messages",Je=class extends g{async createSMSMessage(e){return this.request({method:"POST",path:gr,bodyParams:e})}};var v="/users",ve=class extends g{async getUserList(e={}){return this.request({method:"GET",path:v,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:u(v,e)})}async createUser(e){return this.request({method:"POST",path:v,bodyParams:e})}async updateUser(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:u(v,e),bodyParams:r})}async updateUserMetadata(e,r){return this.requireId(e),this.request({method:"PATCH",path:u(v,e,"metadata"),bodyParams:r})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:u(v,e)})}async getCount(e={}){return this.request({method:"GET",path:u(v,"count"),queryParams:e})}async getUserOauthAccessToken(e,r){return this.requireId(e),this.request({method:"GET",path:u(v,e,"oauth_access_tokens",r)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:u(v,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:u(v,r,"organization_memberships"),queryParams:{limit:n,offset:i}})}async verifyPassword(e){let{userId:r,password:n}=e;return this.requireId(r),this.request({method:"POST",path:u(v,r,"verify_password"),bodyParams:{password:n}})}async verifyTOTP(e){let{userId:r,code:n}=e;return this.requireId(r),this.request({method:"POST",path:u(v,r,"verify_totp"),bodyParams:{code:n}})}};var St=me(require("deepmerge")),He=me(require("snakecase-keys"));var W="https://api.clerk.dev",R="v1",gt="@clerk/backend";var fr={AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},yr={Session:"__session",ClientUat:"__client_uat"},ft={AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},hr={AuthStatus:ft.AuthStatus},br={Json:"application/json"},yt={Attributes:fr,Cookies:yr,Headers:ft,SearchParams:hr,ContentTypes:br};var ht=me(require("#crypto")),bt=me(require("#fetch")),Sr=bt.default.bind(globalThis),Or={crypto:ht.default,fetch:Sr},U=Or;function Re(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var D=class{constructor(e,r,n,i,s){this.id=e;this.identifier=r;this.createdAt=n;this.updatedAt=i;this.invitationId=s}static fromJSON(e){return new D(e.id,e.identifier,e.created_at,e.updated_at,e.invitation_id)}};var E=class{constructor(e,r,n,i,s,a,l,o,m){this.id=e;this.clientId=r;this.userId=n;this.status=i;this.lastActiveAt=s;this.expireAt=a;this.abandonAt=l;this.createdAt=o;this.updatedAt=m}static fromJSON(e){return new E(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at)}};var F=class{constructor(e,r,n,i,s,a,l,o){this.id=e;this.sessionIds=r;this.sessions=n;this.signInId=i;this.signUpId=s;this.lastActiveSessionId=a;this.createdAt=l;this.updatedAt=o}static fromJSON(e){return new F(e.id,e.session_ids,e.sessions.map(r=>E.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}};var V=class{constructor(e,r,n,i){this.object=e;this.id=r;this.slug=n;this.deleted=i}static fromJSON(e){return new V(e.object,e.id||null,e.slug||null,e.deleted)}};var $=class{constructor(e,r,n,i,s,a,l,o,m,c,f){this.id=e;this.fromEmailName=r;this.emailAddressId=n;this.toEmailAddress=i;this.subject=s;this.body=a;this.bodyPlain=l;this.status=o;this.slug=m;this.data=c;this.deliveredByClerk=f}static fromJSON(e){return new $(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}};var M=class{constructor(e,r){this.id=e;this.type=r}static fromJSON(e){return new M(e.id,e.type)}};var T=class{constructor(e,r,n=null,i=null,s=null,a=null){this.status=e;this.strategy=r;this.externalVerificationRedirectURL=n;this.attempts=i;this.expireAt=s;this.nonce=a}static fromJSON(e){return new T(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}};var q=class{constructor(e,r,n,i){this.id=e;this.emailAddress=r;this.verification=n;this.linkedTo=i}static fromJSON(e){return new q(e.id,e.email_address,e.verification&&T.fromJSON(e.verification),e.linked_to.map(r=>M.fromJSON(r)))}};var B=class{constructor(e,r,n,i,s,a,l,o,m,c,f,h={},b,_){this.id=e;this.provider=r;this.identificationId=n;this.externalId=i;this.approvedScopes=s;this.emailAddress=a;this.firstName=l;this.lastName=o;this.picture=m;this.imageUrl=c;this.username=f;this.publicMetadata=h;this.label=b;this.verification=_}static fromJSON(e){return new B(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.avatar_url,e.image_url,e.username,e.public_metadata,e.label,e.verification&&T.fromJSON(e.verification))}};var G=class{constructor(e,r,n,i,s,a,l){this.id=e;this.emailAddress=r;this.publicMetadata=n;this.createdAt=i;this.updatedAt=s;this.status=a;this.revoked=l}static fromJSON(e){return new G(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.revoked)}};var $e=(d=>(d.AllowlistIdentifier="allowlist_identifier",d.Client="client",d.Email="email",d.EmailAddress="email_address",d.ExternalAccount="external_account",d.FacebookAccount="facebook_account",d.GoogleAccount="google_account",d.Invitation="invitation",d.OauthAccessToken="oauth_access_token",d.Organization="organization",d.OrganizationInvitation="organization_invitation",d.OrganizationMembership="organization_membership",d.PhoneNumber="phone_number",d.RedirectUrl="redirect_url",d.Session="session",d.SignInAttempt="sign_in_attempt",d.SignInToken="sign_in_token",d.SignUpAttempt="sign_up_attempt",d.SmsMessage="sms_message",d.User="user",d.Web3Wallet="web3_wallet",d.Token="token",d.TotalCount="total_count",d))($e||{});var H=class{constructor(e,r,n={},i,s,a){this.provider=e;this.token=r;this.publicMetadata=n;this.label=i;this.scopes=s;this.tokenSecret=a}static fromJSON(e){return new H(e.provider,e.token,e.public_metadata,e.label,e.scopes,e.token_secret)}};var K=class{constructor(e,r,n,i,s,a,l,o,m={},c={},f){this.id=e;this.name=r;this.slug=n;this.logoUrl=i;this.imageUrl=s;this.createdBy=a;this.createdAt=l;this.updatedAt=o;this.publicMetadata=m;this.privateMetadata=c;this.maxAllowedMemberships=f}static fromJSON(e){return new K(e.id,e.name,e.slug,e.logo_url,e.image_url,e.created_by,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships)}};var Y=class{constructor(e,r,n,i,s,a,l,o={}){this.id=e;this.emailAddress=r;this.role=n;this.organizationId=i;this.createdAt=s;this.updatedAt=a;this.status=l;this.publicMetadata=o}static fromJSON(e){return new Y(e.id,e.email_address,e.role,e.organization_id,e.created_at,e.updated_at,e.status,e.public_metadata)}};var X=class{constructor(e,r,n={},i={},s,a,l,o){this.id=e;this.role=r;this.publicMetadata=n;this.privateMetadata=i;this.createdAt=s;this.updatedAt=a;this.organization=l;this.publicUserData=o}static fromJSON(e){return new X(e.id,e.role,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,K.fromJSON(e.organization),ie.fromJSON(e.public_user_data))}},ie=class{constructor(e,r,n,i,s,a){this.identifier=e;this.firstName=r;this.lastName=n;this.profileImageUrl=i;this.imageUrl=s;this.userId=a}static fromJSON(e){return new ie(e.identifier,e.first_name,e.last_name,e.profile_image_url,e.image_url,e.user_id)}};var z=class{constructor(e,r,n,i,s,a){this.id=e;this.phoneNumber=r;this.reservedForSecondFactor=n;this.defaultSecondFactor=i;this.verification=s;this.linkedTo=a}static fromJSON(e){return new z(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&T.fromJSON(e.verification),e.linked_to.map(r=>M.fromJSON(r)))}};var Q=class{constructor(e,r,n,i){this.id=e;this.url=r;this.createdAt=n;this.updatedAt=i}static fromJSON(e){return new Q(e.id,e.url,e.created_at,e.updated_at)}};var Z=class{constructor(e,r,n,i,s,a,l){this.id=e;this.userId=r;this.token=n;this.status=i;this.url=s;this.createdAt=a;this.updatedAt=l}static fromJSON(e){return new Z(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}};var ee=class{constructor(e,r,n,i,s,a,l){this.id=e;this.fromPhoneNumber=r;this.toPhoneNumber=n;this.message=i;this.status=s;this.phoneNumberId=a;this.data=l}static fromJSON(e){return new ee(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}};var te=class{constructor(e){this.jwt=e}static fromJSON(e){return new te(e.jwt)}};var se=class{constructor(e,r,n){this.id=e;this.web3Wallet=r;this.verification=n}static fromJSON(e){return new se(e.id,e.web3_wallet,e.verification&&T.fromJSON(e.verification))}};var re=class{constructor(e,r,n,i,s,a,l,o,m,c,f,h,b,_,J,O,A,I,k,y,S={},w={},d={},P=[],ne=[],We=[],Le=[]){this.id=e;this.passwordEnabled=r;this.totpEnabled=n;this.backupCodeEnabled=i;this.twoFactorEnabled=s;this.banned=a;this.createdAt=l;this.updatedAt=o;this.profileImageUrl=m;this.imageUrl=c;this.gender=f;this.birthday=h;this.primaryEmailAddressId=b;this.primaryPhoneNumberId=_;this.primaryWeb3WalletId=J;this.lastSignInAt=O;this.externalId=A;this.username=I;this.firstName=k;this.lastName=y;this.publicMetadata=S;this.privateMetadata=w;this.unsafeMetadata=d;this.emailAddresses=P;this.phoneNumbers=ne;this.web3Wallets=We;this.externalAccounts=Le}static fromJSON(e){return new re(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.created_at,e.updated_at,e.profile_image_url,e.image_url,e.gender,e.birthday,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(r=>q.fromJSON(r)),(e.phone_numbers||[]).map(r=>z.fromJSON(r)),(e.web3_wallets||[]).map(r=>se.fromJSON(r)),(e.external_accounts||[]).map(r=>B.fromJSON(r)))}};function Ge(t){return Array.isArray(t)?t.map(e=>Be(e)):kr(t)?t.data.map(e=>Be(e)):Be(t)}function kr(t){return Array.isArray(t.data)&&t.data!==void 0}function Ir(t){return t.total_count}function Be(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return V.fromJSON(t);switch(t.object){case"allowlist_identifier":return D.fromJSON(t);case"client":return F.fromJSON(t);case"email_address":return q.fromJSON(t);case"email":return $.fromJSON(t);case"invitation":return G.fromJSON(t);case"oauth_access_token":return H.fromJSON(t);case"organization":return K.fromJSON(t);case"organization_invitation":return Y.fromJSON(t);case"organization_membership":return X.fromJSON(t);case"phone_number":return z.fromJSON(t);case"redirect_url":return Q.fromJSON(t);case"sign_in_token":return Z.fromJSON(t);case"session":return E.fromJSON(t);case"sms_message":return ee.fromJSON(t);case"token":return te.fromJSON(t);case"total_count":return Ir(t);case"user":return re.fromJSON(t);default:return t}}var Pr=t=>async(...e)=>{let{data:r,errors:n,status:i,statusText:s}=await t(...e);if(n===null)return r;throw new le(s||"",{data:n,status:i||""})};function Ot(t){return Pr(async r=>{let{apiKey:n,secretKey:i,apiUrl:s=W,apiVersion:a=R,userAgent:l=gt,httpOptions:o={}}=t,{path:m,method:c,queryParams:f,headerParams:h,bodyParams:b}=r,_=i||n;Re(_);let J=u(s,a,m),O=new URL(J);if(f){let S=(0,He.default)({...f});for(let[w,d]of Object.entries(S))d&&[d].flat().forEach(P=>O.searchParams.append(w,P))}let A={Authorization:`Bearer ${_}`,"Content-Type":"application/json","Clerk-Backend-SDK":l,...h},k=c!=="GET"&&b&&Object.keys(b).length>0?{body:JSON.stringify((0,He.default)(b,{deep:!1}))}:null,y;try{y=await U.fetch(O.href,(0,St.default)(o,{method:c,headers:A,...k}));let w=await(A&&A["Content-Type"]==="application/json"?y.json():y.text());if(!y.ok)throw w;return{data:Ge(w),errors:null}}catch(S){return S instanceof Error?{data:null,errors:[{code:"unexpected_error",message:S.message||"Unexpected error"}]}:{data:null,errors:_r(S),status:y?.status,statusText:y?.statusText}}})}function _r(t){if(t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(Ar):[]}return[]}function Ar(t){return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t?.meta?.param_name,sessionId:t?.meta?.session_id}}}var le=class extends Error{constructor(r,{data:n,status:i}){super(r);Object.setPrototypeOf(this,le.prototype),this.clerkError=!0,this.message=r,this.status=i,this.errors=n}};function ae(t){let e=Ot(t);return{allowlistIdentifiers:new ge(e),clients:new fe(e),emailAddresses:new be(e),emails:new Se(e),interstitial:new Oe(e),invitations:new ke(e),organizations:new Ie(e),phoneNumbers:new _e(e),redirectUrls:new we(e),sessions:new xe(e),signInTokens:new Te(e),smsMessages:new Je(e),users:new ve(e),domains:new ye(e)}}var kt=t=>()=>{let e={...t};return e.apiKey=(e.apiKey||"").substring(0,7),e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}};function Xe(t,e,r){let{act:n,sid:i,org_id:s,org_role:a,org_slug:l,sub:o}=t,{apiKey:m,secretKey:c,apiUrl:f,apiVersion:h,token:b,session:_,user:J,organization:O}=e,{sessions:A}=ae({apiKey:m,secretKey:c,apiUrl:f,apiVersion:h}),I=Tr({sessionId:i,sessionToken:b,fetcher:(...k)=>A.getToken(...k)});return{actor:n,sessionClaims:t,sessionId:i,session:_,userId:o,user:J,orgId:s,orgRole:a,orgSlug:l,organization:O,getToken:I,debug:kt({...e,...r})}}function Qe(t){return{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,organization:null,getToken:()=>Promise.resolve(null),debug:kt(t)}}function Ye(t){return t&&(delete t.privateMetadata,delete t.private_metadata),t}function wr(t){let e=t.user?{...t.user}:t.user,r=t.organization?{...t.organization}:t.organization;return Ye(e),Ye(r),{...t,user:e,organization:r}}var xr=t=>{let{debug:e,getToken:r,...n}=t;return n},Tr=t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(i={})=>n?i.template?e(n,i.template):r:null};function Jr(t){return new Promise(e=>setTimeout(e,t))}var vr=5;async function ue(t,e=1,r=vr){try{return await t()}catch(n){if(e>=r)throw n;return await Jr(2**e*100),ue(t,e+1)}}function L(t){return t.startsWith("test_")||t.startsWith("sk_test_")}function It(t){return t.startsWith("live_")||t.startsWith("sk_live_")}function Pt(t){return t.endsWith(".lclstage.dev")||t.endsWith(".stgstage.dev")||t.endsWith(".clerkstage.dev")||t.endsWith(".accountsstage.dev")}function Rr(){let t=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;let n=typeof r=="string"?r:r.hostname,i=e.get(n);return i===void 0&&(i=t.some(s=>n.endsWith(s)),e.set(n,i)),i}}}var{isDevOrStagingUrl:Ze}=Rr();var _t="pk_live_",Ur="pk_test_";function j(t){if(t=t||"",!Nr(t))return null;let e=t.startsWith(_t)?"production":"development",r=At(t.split("_")[2]);return r.endsWith("$")?(r=r.slice(0,-1),{instanceType:e,frontendApi:r}):null}function Nr(t){t=t||"";let e=t.startsWith(_t)||t.startsWith(Ur),r=At(t.split("_")[2]||"").endsWith("$");return e&&r}var At=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof globalThis<"u"&&globalThis.Buffer?new globalThis.Buffer(t,"base64").toString():t;var p=class extends Error{constructor({action:r,message:n,reason:i}){super(n);Object.setPrototypeOf(this,p.prototype),this.reason=i,this.message=n,this.action=r}getFullMessage(){return`${[this.message,this.action].filter(r=>r).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function Cr(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}function Ce(t){t.frontendApi=j(t.publishableKey)?.frontendApi||t.frontendApi||"";let e=Ze(t.frontendApi)?"":Cr(t.domain),{debugData:r,frontendApi:n,pkgVersion:i,clerkJSUrl:s,clerkJSVersion:a,publishableKey:l,proxyUrl:o,isSatellite:m=!1,domain:c,signInUrl:f}=t;return`
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${n}';
            window.__clerk_debug = ${JSON.stringify(r||{})};
            ${o?`window.__clerk_proxy_url = '${o}'`:""}
            ${c?`window.__clerk_domain = '${c}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${m},
                        isInterstitial: ${!0},
                        signInUrl: ${f?`'${f}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${l?`script.setAttribute('data-clerk-publishable-key', '${l}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}

                ${c?`script.setAttribute('data-clerk-domain', '${c}');`:""}
                ${o?`script.setAttribute('data-clerk-proxy-url', '${o}')`:""};
                script.async = true;
                script.src = '${s||Er(o||e||n,{pkgVersion:i,clerkJSVersion:a})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`}async function wt(t){t.frontendApi=j(t.publishableKey)?.frontendApi||t.frontendApi||"";let e=Ue(t),r=await ue(()=>U.fetch(Ue(t)));if(!r.ok)throw new p({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${e} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function Ue(t){t.frontendApi=j(t.publishableKey)?.frontendApi||t.frontendApi||"";let{apiUrl:e,frontendApi:r,pkgVersion:n,clerkJSVersion:i,publishableKey:s,proxyUrl:a,isSatellite:l,domain:o,signInUrl:m}=t,c=new URL(e);return c.pathname=u(c.pathname,R,"/public/interstitial"),c.searchParams.append("clerk_js_version",i||xt(r,n)),s?c.searchParams.append("publishable_key",s):c.searchParams.append("frontend_api",r),a&&c.searchParams.append("proxy_url",a),l&&c.searchParams.append("is_satellite","true"),c.searchParams.append("sign_in_url",m||""),Ze(t.frontendApi)||c.searchParams.append("use_domain_for_script","true"),o&&c.searchParams.append("domain",o),c.href}var xt=(t,e)=>!e&&Pt(t)?"staging":e?e.includes("next")?"next":e.split(".")[0]||"latest":"latest",Er=(t,{pkgVersion:e,clerkJSVersion:r})=>{let n=t.replace(/http(s)?:\/\//,""),i=xt(t,e);return`https://${n}/npm/@clerk/clerk-js@${r||i}/dist/clerk.browser.js`};var et=(i=>(i.SignedIn="signed-in",i.SignedOut="signed-out",i.Interstitial="interstitial",i.Unknown="unknown",i))(et||{});async function tt(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,cookieToken:a,frontendApi:l,proxyUrl:o,publishableKey:m,domain:c,isSatellite:f,headerToken:h,loadSession:b,loadUser:_,loadOrganization:J,signInUrl:O}=t,{sid:A,org_id:I,sub:k}=e,{sessions:y,users:S,organizations:w}=ae({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s}),[d,P,ne]=await Promise.all([b?y.getSession(A):Promise.resolve(void 0),_?S.getUser(k):Promise.resolve(void 0),J&&I?w.getOrganization({organizationId:I}):Promise.resolve(void 0)]),nr=Xe(e,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:s,token:a||h||"",session:d,user:P,organization:ne},{...t,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:l,proxyUrl:o,publishableKey:m,domain:c,isSatellite:f,signInUrl:O,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>nr}}function N(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:l,signInUrl:o}=t;return{status:"signed-out",reason:e,message:r,frontendApi:n,proxyUrl:s,publishableKey:i,isSatellite:a,domain:l,signInUrl:o,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>Qe({...t,status:"signed-out",reason:e,message:r})}}function C(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:l,signInUrl:o}=t;return{status:"interstitial",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:a,domain:l,proxyUrl:s,signInUrl:o,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null}}function Tt(t,e,r=""){let{frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:l}=t;return{status:"unknown",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:l,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null}}function rt({originURL:t,host:e,forwardedHost:r,forwardedPort:n,forwardedProto:i}){let s=vt(i),a=vt(n),l=(i||"").split(",").length>(n||"").split(",").length;s&&l&&(a=Rt(s));let o=Kr(t.protocol);if(s&&s!==o)return!0;let c=Mr(r||e||void 0,s||o);return c.port=a||c.port,Jt(c)!==Jt(t)||c.hostname!==t.hostname}function Mr(t,e="https"){return new URL(`${e}://${t}`)}var qr={http:"80",https:"443"};function Jt(t){return t.port||Rt(t.protocol)}function Rt(t){return qr[t]}function vt(t){return t?.split(",")[0]?.trim()||""}function Kr(t){return t?.replace(/:$/,"")||""}var Ut=(t,e)=>t?t.find(r=>r.code===e):null;var Ee={parse(t,e){return zr(t,Nt,e)},stringify(t,e){return Wr(t,Nt,e)}},Nt={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function zr(t,e,r={}){if(!e.codes){e.codes={};for(let o=0;o<e.chars.length;++o)e.codes[e.chars[o]]=o}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let n=t.length;for(;t[n-1]==="=";)if(--n,!r.loose&&!((t.length-n)*e.bits&7))throw new SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*e.bits/8|0),s=0,a=0,l=0;for(let o=0;o<n;++o){let m=e.codes[t[o]];if(m===void 0)throw new SyntaxError("Invalid character "+t[o]);a=a<<e.bits|m,s+=e.bits,s>=8&&(s-=8,i[l++]=255&a>>s)}if(s>=e.bits||255&a<<8-s)throw new SyntaxError("Unexpected end of data");return i}function Wr(t,e,r={}){let{pad:n=!0}=r,i=(1<<e.bits)-1,s="",a=0,l=0;for(let o=0;o<t.length;++o)for(l=l<<8|255&t[o],a+=8;a>e.bits;)a-=e.bits,s+=e.chars[i&l>>a];if(a&&(s+=e.chars[i&l<<e.bits-a]),n)for(;s.length*e.bits&7;)s+="=";return s}var Lr=t=>Array.isArray(t)&&t.length>0&&t.every(e=>typeof e=="string"),Ct=(t,e)=>{let r=[e].flat().filter(s=>!!s),n=[t].flat().filter(s=>!!s);if(r.length>0&&n.length>0){if(typeof t=="string"){if(!r.includes(t))throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}else if(Lr(t)&&!t.some(s=>r.includes(s)))throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(r)}".`})}};var jr=5*1e3,st={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512",ES256:"SHA-256",ES384:"SHA-384",ES512:"SHA-512"},nt="RSASSA-PKCS1-v1_5",it="ECDSA",Dr={RS256:nt,RS384:nt,RS512:nt,ES256:it,ES384:it,ES512:it},Fr=Object.keys(st);async function at(t,e){let{header:r,signature:n,raw:i}=t,a=new TextEncoder().encode([i.header,i.payload].join(".")),l=await U.crypto.subtle.importKey("jwk",e,{name:Dr[r.alg],hash:st[r.alg]},!1,["verify"]);return U.crypto.subtle.verify("RSASSA-PKCS1-v1_5",l,n,a)}function de(t){let e=(t||"").toString().split(".");if(e.length!==3)throw new p({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,n,i]=e,s=new TextDecoder,a=JSON.parse(s.decode(Ee.parse(r,{loose:!0}))),l=JSON.parse(s.decode(Ee.parse(n,{loose:!0}))),o=Ee.parse(i,{loose:!0});return{header:a,payload:l,signature:o,raw:{header:r,payload:n,signature:i,text:t}}}async function Me(t,{audience:e,authorizedParties:r,clockSkewInSeconds:n,clockSkewInMs:i,issuer:s,key:a}){let l=i||n||jr,o=de(t),{header:m,payload:c}=o,{typ:f,alg:h}=m;if(typeof f<"u"&&f!=="JWT")throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(f)}. Expected "JWT".`});if(!st[h])throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(h)}. Supported: ${Fr}.`});let{azp:b,sub:_,aud:J,iss:O,iat:A,exp:I,nbf:k}=c;if(typeof _!="string")throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(_)}.`});if(Ct([J],[e]),b&&r&&r.length>0&&!r.includes(b))throw new p({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(b)}. Expected "${r}".`});if(typeof s=="function"&&!s(O))throw new p({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if(typeof s=="string"&&O&&O!==s)throw new p({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(o.payload.iss)}. Expected "${s}".`});if(typeof I!="number")throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(I)}. Expected number.`});let y=new Date(Date.now()),S=new Date(0);if(S.setUTCSeconds(I),S.getTime()<=y.getTime()-l)throw new p({reason:"token-expired",message:`JWT is expired. Expiry date: ${S}, Current date: ${y}.`});if(k!==void 0){if(typeof k!="number")throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(k)}. Expected number.`});let P=new Date(0);if(P.setUTCSeconds(k),P.getTime()>y.getTime()+l)throw new p({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${P}; Current date: ${y};`})}if(A!==void 0){if(typeof A!="number")throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(A)}. Expected number.`});let P=new Date(0);if(P.setUTCSeconds(A),P.getTime()>y.getTime()+l)throw new p({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${P}; Current date: ${y};`})}let d;try{d=await at(o,a)}catch(P){throw new p({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${P}`})}if(!d)throw new p({reason:"token-invalid-signature",message:"JWT signature is invalid."});return c}var qe={},Mt=0;function Ke(t){return qe[t]}function qt(t,e=1e3*60*60){qe[t.kid]=t,Mt=Date.now(),e>=0&&setTimeout(()=>{t?delete qe[t.kid]:qe={}},e)}var Et="local",$r="-----BEGIN PUBLIC KEY-----",Br="-----END PUBLIC KEY-----",Gr="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",Hr="IDAQAB";function Kt(t){if(!Ke(Et)){if(!t)throw new p({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let e=t.replace(/(\r\n|\n|\r)/gm,"").replace($r,"").replace(Br,"").replace(Gr,"").replace(Hr,"").replace(/\+/g,"-").replace(/\//g,"_");qt({kid:"local",kty:"RSA",alg:"RS256",n:e,e:"AQAB"},-1)}return Ke(Et)}async function ot({apiKey:t,secretKey:e,apiUrl:r=W,apiVersion:n=R,issuer:i,kid:s,jwksCacheTtlInMs:a=1e3*60*60,skipJwksCache:l}){let o=!Ke(s)&&Qr();if(l||o){let c,f=e||t;if(f)c=()=>Xr(r,f,n);else if(i)c=()=>Yr(i);else throw new p({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:h}=await ue(c);if(!h||!h.length)throw new p({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});h.forEach(b=>qt(b,a))}let m=Ke(s);if(!m)throw new p({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${s}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.`,reason:"jwk-remote-missing"});return m}async function Yr(t){let e=new URL(t);e.pathname=u(e.pathname,".well-known/jwks.json");let r=await U.fetch(e.href);if(!r.ok)throw new p({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${e.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function Xr(t,e,r){if(!e)throw new p({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(t);n.pathname=u(n.pathname,r,"/jwks");let i=await U.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok){let s=await i.json(),a=Ut(s?.errors,"clerk_key_invalid");if(a){let l="secret-key-invalid";throw new p({action:"Contact support@clerk.com",message:a.message,reason:l})}throw new p({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"})}return i.json()}function Qr(){return Date.now()-Mt>=300*1e3}async function lt(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,audience:a,authorizedParties:l,clockSkewInSeconds:o,clockSkewInMs:m,issuer:c,jwksCacheTtlInMs:f,jwtKey:h,skipJwksCache:b}=e,{header:_}=de(t),{kid:J}=_,O;if(h)O=Kt(h);else if(typeof c=="string")O=await ot({issuer:c,kid:J,jwksCacheTtlInMs:f,skipJwksCache:b});else if(r||n)O=await ot({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,kid:J,jwksCacheTtlInMs:f,skipJwksCache:b});else throw new p({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await Me(t,{audience:a,authorizedParties:l,clockSkewInSeconds:o,clockSkewInMs:m,key:O,issuer:c})}var en=t=>!!t?.get("__clerk_satellite_url"),tn=t=>t?.get("__clerk_synced")==="true",rn=t=>t?.get("__clerk_referrer_primary")==="true",nn=/^Mozilla\/|(Amazon CloudFront)/,zt=t=>nn.test(t||""),Wt=t=>{let{apiKey:e,secretKey:r,userAgent:n}=t;if(L(r||e||"")&&!zt(n))return N(t,"header-missing-non-browser")},Lt=t=>{let{origin:e,host:r,forwardedHost:n,forwardedPort:i,forwardedProto:s}=t;if(e&&rt({originURL:new URL(e),host:r,forwardedHost:n,forwardedPort:i,forwardedProto:s}))return N(t,"header-missing-cors")},jt=t=>{let{apiKey:e,secretKey:r,isSatellite:n,searchParams:i}=t;if(L(r||e||"")&&!n&&en(i))return C(t,"primary-responds-to-syncing")},Dt=t=>{let{apiKey:e,secretKey:r,clientUat:n}=t;if(L(r||e||"")&&!n)return C(t,"uat-missing")},Ft=t=>{let{apiKey:e,secretKey:r,referrer:n,host:i,forwardedHost:s,forwardedPort:a,forwardedProto:l}=t,o=n&&rt({originURL:new URL(n),host:i,forwardedHost:s,forwardedPort:a,forwardedProto:l});if(L(r||e||"")&&o)return C(t,"cross-origin-referrer")},Vt=t=>{let{apiKey:e,secretKey:r,isSatellite:n,searchParams:i}=t,s=r||e||"";if(n&&rn(i)&&L(s))return C(t,"satellite-returns-from-primary")},$t=t=>{let{apiKey:e,secretKey:r,clientUat:n,cookieToken:i}=t;if(It(r||e||"")&&!n&&!i)return N(t,"cookie-and-uat-missing")},Bt=t=>{let{clientUat:e}=t;if(e==="0")return N(t,"standard-signed-out")},Gt=t=>{let{clientUat:e,cookieToken:r}=t;if(e&&Number.parseInt(e)>0&&!r)return C(t,"cookie-missing")},Ht=async t=>{let{headerToken:e}=t,r=await Xt(t,e);return await tt(t,r)},Yt=async t=>{let{cookieToken:e,clientUat:r}=t,n=await Xt(t,e),i=await tt(t,n),a=i.toAuth().sessionClaims.iat<Number.parseInt(r);return!r||a?C(t,"cookie-outdated"):i};async function ut(t,e){for(let r of e){let n=await r(t);if(n)return n}return N(t,"unexpected-error")}async function Xt(t,e){let{isSatellite:r,proxyUrl:n}=t,i;return r?i=null:n?i=n:i=s=>s.startsWith("https://clerk.")||s.includes(".clerk.accounts"),lt(e,{...t,issuer:i})}var Qt=t=>{let{clientUat:e,isSatellite:r,searchParams:n,userAgent:i}=t,s=!e||e==="0";if(r&&s&&!zt(i))return N(t,"satellite-needs-syncing");if(r&&s&&!tn(n))return C(t,"satellite-needs-syncing")};function sn(t,e){if(!t&&L(e))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}function an(t){if(!t)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}async function Zt(t){t.frontendApi=j(t.publishableKey)?.frontendApi||t.frontendApi||"",t.apiUrl=t.apiUrl||W,t.apiVersion=t.apiVersion||R,t.headerToken=t.headerToken?.replace("Bearer ",""),Re(t.secretKey||t.apiKey),t.isSatellite&&(sn(t.signInUrl,t.secretKey||t.apiKey),an(t.proxyUrl||t.domain));async function e(){try{return await ut(t,[Ht])}catch(i){return n(i,"header")}}async function r(){try{return await ut(t,[Lt,Wt,Qt,Vt,jt,$t,Dt,Ft,Gt,Bt,Yt])}catch(i){return n(i,"cookie")}}function n(i,s){return i instanceof p?(i.tokenCarrier=s,["token-expired","token-not-active-yet"].includes(i.reason)?s==="header"?Tt(t,i.reason,i.getFullMessage()):C(t,i.reason,i.getFullMessage()):N(t,i.reason,i.getFullMessage())):N(t,"unexpected-error",i.message)}return t.headerToken?e():r()}var ze=t=>{let{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:l,isSatellite:o,domain:m}=t;return{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:l,isSatellite:o,domain:m}};function ct(t){let{apiClient:e}=t,{apiKey:r="",secretKey:n="",jwtKey:i="",apiUrl:s=W,apiVersion:a=R,frontendApi:l="",proxyUrl:o="",publishableKey:m="",isSatellite:c=!1,domain:f="",audience:h=""}=t.options;return{authenticateRequest:({apiKey:I,secretKey:k,audience:y,frontendApi:S,proxyUrl:w,publishableKey:d,jwtKey:P,isSatellite:ne,domain:We,searchParams:Le,...dt})=>Zt({...dt,apiKey:I||r,secretKey:k||n,audience:y||h,apiUrl:s,apiVersion:a,frontendApi:S||l,proxyUrl:w||o,publishableKey:d||m,isSatellite:ne||c,domain:We||f,jwtKey:P||i,searchParams:Le}),localInterstitial:({frontendApi:I,publishableKey:k,proxyUrl:y,isSatellite:S,domain:w,...d})=>Ce({...d,frontendApi:I||l,proxyUrl:y||o,publishableKey:k||m,isSatellite:S||c,domain:w||f}),remotePublicInterstitial:({frontendApi:I,publishableKey:k,proxyUrl:y,isSatellite:S,domain:w,...d})=>wt({...d,apiUrl:s,frontendApi:I||l,publishableKey:k||m,proxyUrl:y||o,isSatellite:S||c,domain:w||f}),remotePrivateInterstitial:()=>e.interstitial.getInterstitial(),remotePublicInterstitialUrl:Ue,debugRequestState:ze}}var er=(t,e)=>{let r;if(t.startsWith("http"))r=new URL(t);else{if(!e||!e.startsWith("http"))throw new Error("destination url or return back url should be an absolute path url!");let n=new URL(e);r=new URL(t,n.origin)}return e&&r.searchParams.set("redirect_url",e),r.toString()},tr="Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.";function rr({redirectAdapter:t,signUpUrl:e,signInUrl:r,frontendApi:n,publishableKey:i}){n||(n=j(i)?.frontendApi);let s=on(n);return{redirectToSignUp:({returnBackUrl:o}={})=>{if(!e&&!s)throw new Error(tr);let m=`${s}/sign-up`;return t(er(e||m,o))},redirectToSignIn:({returnBackUrl:o}={})=>{if(!r&&!s)throw new Error(tr);let m=`${s}/sign-in`;return t(er(r||m,o))}}}function on(t){return t?`https://${t.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.")}`:""}function ln(t){let e={...t},r=ae(e),n=ct({options:e,apiClient:r});return{...r,...n,__unstable_options:e}}0&&(module.exports={AllowlistIdentifier,AuthStatus,Clerk,Client,DeletedObject,Email,EmailAddress,ExternalAccount,IdentificationLink,Invitation,OauthAccessToken,ObjectType,Organization,OrganizationInvitation,OrganizationMembership,OrganizationMembershipPublicUserData,PhoneNumber,RedirectUrl,SMSMessage,Session,SignInToken,Token,User,Verification,constants,createAuthenticateRequest,debugRequestState,decodeJwt,deserialize,hasValidSignature,loadInterstitialFromLocal,makeAuthObjectSerializable,prunePrivateMetadata,redirect,sanitizeAuthObject,signedInAuthObject,signedOutAuthObject,verifyJwt,verifyToken});
//# sourceMappingURL=index.js.map